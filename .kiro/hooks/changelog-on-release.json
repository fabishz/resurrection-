{
  "name": "Generate Changelog and Update README on Release",
  "description": "Automatically generate CHANGELOG.md and update README.md release section when creating a release tag",
  "event": "onGitTag",
  "tagPattern": "v*.*.*",
  "enabled": true,
  "prompt": "A new release tag {{tagName}} was created. Generate a comprehensive changelog and update the README:\n\n## PART 1: Generate CHANGELOG.md\n\n1. **Gather commit history**:\n   - Run `git log <last-tag>..HEAD --oneline` to get all commits since last release\n   - If no previous tag exists, get all commits: `git log --oneline`\n   - Parse commit messages to extract meaningful changes\n\n2. **Categorize commits** using conventional commit format:\n   - âœ¨ **Features** (feat:): New features and capabilities\n   - ğŸ› **Bug Fixes** (fix:): Bug fixes and corrections\n   - âš¡ **Performance** (perf:): Performance improvements\n   - ğŸ“š **Documentation** (docs:): Documentation updates\n   - â™»ï¸ **Refactoring** (refactor:): Code refactoring without feature changes\n   - âœ… **Testing** (test:): Test additions or updates\n   - ğŸ”§ **Chores** (chore:): Build process, dependency updates, etc.\n   - âš ï¸ **Breaking Changes** (BREAKING CHANGE:): Breaking API changes\n   - ğŸ¨ **Style** (style:): UI/UX improvements, styling changes\n   - ğŸ”’ **Security** (security:): Security fixes and improvements\n\n3. **Generate changelog entry** in this format:\n   ```markdown\n   ## [{{tagName}}] - {{date}}\n   \n   ### âœ¨ Features\n   - Feature description from commit message (#123)\n   - Another feature with context\n   \n   ### ğŸ› Bug Fixes\n   - Bug fix description with issue reference (#456)\n   - Another fix\n   \n   ### âš¡ Performance\n   - Performance improvement details\n   \n   ### ğŸ“š Documentation\n   - Doc update description\n   \n   ### ğŸ”§ Chores\n   - Dependency updates (list major ones)\n   - Build improvements\n   \n   ### âš ï¸ Breaking Changes\n   - **BREAKING**: Description of breaking change\n   - **Migration Guide**: Steps to migrate from previous version\n   ```\n\n4. **Read or create CHANGELOG.md**:\n   - If CHANGELOG.md doesn't exist, create it with proper header:\n     ```markdown\n     # Changelog\n     \n     All notable changes to RSS Renaissance will be documented in this file.\n     \n     The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),\n     and this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).\n     ```\n   - If it exists, read the current content\n\n5. **Insert new entry**:\n   - Add the new release entry at the top, right after the header\n   - Keep all previous releases below\n   - Add comparison links at the bottom:\n     ```markdown\n     [{{tagName}}]: https://github.com/username/rss-renaissance/compare/{{lastTag}}...{{tagName}}\n     ```\n\n6. **Quality guidelines**:\n   - Use emoji for visual categorization (âœ¨ğŸ›âš¡ğŸ“šğŸ”§âš ï¸â™»ï¸âœ…ğŸ¨ğŸ”’)\n   - Keep descriptions concise and user-focused (not developer-focused)\n   - Link to issues/PRs when mentioned in commits (e.g., #123, PR #456)\n   - Group related changes together under same bullet\n   - Omit trivial changes (typo fixes, minor formatting)\n   - Include contributor acknowledgments if multiple contributors\n   - For breaking changes, always include migration guide\n\n7. **Special handling for first release** (v0.1.0 or v1.0.0):\n   - Add a special 'ğŸ‰ Initial Release' section\n   - List all major features included in the initial version\n   - Include quick start instructions\n   - Highlight key differentiators\n\n## PART 2: Update README.md Release Section\n\n8. **Read README.md** and locate the appropriate section to update:\n   - Look for existing \"## ğŸ“¦ Latest Release\" or \"## ğŸš€ Releases\" section\n   - If no release section exists, add one after the \"Features\" section\n\n9. **Create/Update release section** with this format:\n   ```markdown\n   ## ğŸ“¦ Latest Release\n   \n   ### [{{tagName}}] - {{date}}\n   \n   **Highlights:**\n   - Top 3-5 most important changes from this release\n   - Focus on user-facing improvements\n   - Include links to relevant documentation\n   \n   **Download:** [Release {{tagName}}](https://github.com/username/rss-renaissance/releases/tag/{{tagName}})\n   \n   **Full Changelog:** [CHANGELOG.md](CHANGELOG.md)\n   \n   ---\n   \n   <details>\n   <summary>Previous Releases</summary>\n   \n   ### [Previous Version] - Previous Date\n   Brief summary of previous release...\n   \n   </details>\n   ```\n\n10. **Update badges** (if applicable):\n    - Update version badge if present in README\n    - Update any \"Latest Release\" shields.io badges\n\n11. **Preserve existing content**:\n    - Don't modify other sections of README\n    - Keep all existing links and references intact\n    - Maintain consistent formatting with rest of document\n\n## PART 3: Final Validation\n\n12. **Review generated files**:\n    - Ensure CHANGELOG.md is properly formatted\n    - Verify README.md release section is clear and concise\n    - Check that all links are valid\n    - Confirm emoji render correctly\n    - Validate markdown syntax\n\n13. **Output summary**:\n    - List number of commits processed\n    - Show breakdown by category (X features, Y bug fixes, etc.)\n    - Highlight any breaking changes\n    - Confirm both files were updated successfully\n\n## FORMATTING RULES:\n\n- Use present tense (\"Add feature\" not \"Added feature\")\n- Start with capital letter\n- No period at end of bullet points\n- Keep lines under 100 characters\n- Use consistent emoji across both files\n- Link format: `[text](url)` or `(#issue-number)`\n- Date format: YYYY-MM-DD (e.g., 2025-11-12)\n\n## EXAMPLE OUTPUT:\n\nFor a release with commits like:\n- `feat: add AI summarization with GPT-4o`\n- `fix: resolve deduplication edge case`\n- `perf: optimize feed parsing by 40%`\n- `docs: update API examples`\n\nGenerate:\n\n**CHANGELOG.md:**\n```markdown\n## [v1.2.0] - 2025-11-12\n\n### âœ¨ Features\n- Add AI summarization with GPT-4o integration for intelligent article summaries\n\n### ğŸ› Bug Fixes\n- Resolve deduplication edge case where similar titles weren't properly merged\n\n### âš¡ Performance\n- Optimize feed parsing by 40% through improved XML parsing algorithm\n\n### ğŸ“š Documentation\n- Update API examples with new summarization endpoints\n```\n\n**README.md (new section):**\n```markdown\n## ğŸ“¦ Latest Release\n\n### [v1.2.0] - 2025-11-12\n\n**Highlights:**\n- ğŸ¤– AI-powered article summarization with GPT-4o\n- âš¡ 40% faster feed parsing performance\n- ğŸ› Improved deduplication accuracy\n\n**Download:** [Release v1.2.0](https://github.com/username/rss-renaissance/releases/tag/v1.2.0)\n\n**Full Changelog:** [CHANGELOG.md](CHANGELOG.md)\n```\n\nWrite from a user's perspective - focus on what changed for them, not internal implementation details. Make it exciting and clear!",
  "autoApprove": false,
  "runInBackground": false
}
